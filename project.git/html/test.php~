<?php
/* A FDF content empy */
$xfdf_head = '<?xml version="1.0" encoding="UTF-8"?><xfdf xmlns="http://ns.adobe.com/xfdf/" xml:space="preserve"><fields>';
$xml_data = '';
$xfdf_end = '</fields></xfdf>';

/* Generate all fields with field_key form webform and value form submission 
foreach ($webform['#node']->webform['components'] as $key => $value) {

    if ($webform['#submission']->data[$key]['value'][0]){
        $valeur = $webform['#submission']->data[$key]['value'][0];
    } else {
        $valeur = '';
    }

    $xml_data .= '
        <field name="'.$webform['#node']->webform['components'][$key]['form_key'].'">
            <value>'.$valeur.'</value>
        </field>';
}*/

echo "helloooooo";

$field1 = "text1";	$value1 = "hello";
$field2 = "text2";  $value2 = "helloaegr";
$field3 = "text3";  $value3 = "hellogrthg";
$field4 = "text4";  $value4 = "helloergh";
$field5 = "text5";  $value5 = "helloaefgsf";
$field6 = "text6";  $value6 = "helloafdgsf";
$field7 = "text7";  $value7 = "hellodgsf";
$field8 = "text8";  $value8 = "hellgfhdgo";


$xml_data .= '
        <field name="'.$field1.'">
            <value>'.$value1.'</value>
        </field>';
$xml_data .= '
        <field name="'.$field2.'">
            <value>'.$value2.'</value>
        </field>';
$xml_data .= '
        <field name="'.$field3.'">
            <value>'.$value3.'</value>
        </field>';
$xml_data .= '
        <field name="'.$field4.'">
            <value>'.$value4.'</value>
        </field>';
$xml_data .= '
        <field name="'.$field5.'">
            <value>'.$value5.'</value>
        </field>';
$xml_data .= '
        <field name="'.$field6.'">
            <value>'.$value6.'</value>
        </field>';
$xml_data .= '
        <field name="'.$field7.'">
            <value>'.$value7.'</value>
        </field>';
$xml_data .= '
        <field name="'.$field8.'">
            <value>'.$value8.'</value>
        </field>';

$FDF_content = $xfdf_head.$xml_data.$xfdf_end;

$FDF_file = fopen('new_fdf.fdf', 'w');
echo $FDF_file;
fwrite($FDF_file, $FDF_content);
fclose($FDF_file);
$pdf_template = "one_page.pdf";
$new_fillup_pdf = "new.pdf";

$pdftk_command = '/usr/bin/pdftk '. $pdf_template .' fill_form new_fdf.fdf output '.$new_fillup_pdf.' flatten';
shell_exec($pdftk_command);

echo '<a href="'.$new_fillup_pdf.'">download</a>';

?>
